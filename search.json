[{"path":"https://lucarraro.github.io/traudem/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 traudem authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"windows","dir":"Articles","previous_headings":"","what":"Windows","title":"Install TauDEM","text":"’re luck! TauDEM Windows installer install three tools ! Refer https://hydrology.usu.edu/taudem/taudem5/downloads.html.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"finalize-your-installation","dir":"Articles","previous_headings":"","what":"Finalize your installation","title":"Install TauDEM","text":"done,","code":""},{"path":[]},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"add-taudem-to-the-path","dir":"Articles","previous_headings":"Finalize your installation > Register TauDEM in R","what":"Add TauDEM to the PATH","title":"Install TauDEM","text":"Windows installer might done automatically. operating systems (macOS, Linux) use usual method add directory PATH.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"or-add-an-environmental-variable","dir":"Articles","previous_headings":"Finalize your installation > Register TauDEM in R","what":"OR add an environmental variable","title":"Install TauDEM","text":"Add R environmental variable called TAUDEM_PATH points location TauDEM executables can found (Windows might C:\\Program Files\\TauDEM, Ubuntu /usr/local/taudem). instance Ubuntu adding line .Renviron (see usethis::edit_r_environ()) re-starting R: , just session, running line R code:","code":"TAUDEM_PATH='/usr/local/taudem' Sys.setenv(TAUDEM_PATH='/usr/local/taudem')"},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"check-your-installation","dir":"Articles","previous_headings":"Finalize your installation","what":"Check your installation","title":"Install TauDEM","text":"Run traudem::taudem_sitrep() read output carefully. Pay attention error might indicate part installation successful. well (error, normal output TauDEM), congratulations! system ready apply TauDEM data.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"macos","dir":"Articles","previous_headings":"","what":"macOS","title":"Install TauDEM","text":"install dependencies, Homebrew recommended. package manager, similar APT Linux systems. Open terminal. Download install GDAL MPICH: brew install gdal mpich Go Github page TauDEM download code ZIP Extract move folder TauDEM-Develop convenient place, e.g. /Users/$USER/Documents/TauDEM Go back terminal go directory cd /Users/$USER/Documents/TauDEM/TauDEM-Develop Create folder executables installed : mkdir bin Go source folder, create build folder go cd src && mkdir build && cd build Build cmake ... installed yet, use homebrew brew install cmake retry. Finalize make && sudo make install executable files end /usr/local/taudem/. Add location executable files path environment variable. bit tricky macOS, since RStudio package see path added /etc/paths.d/. add following two commands: echo \"/usr/local/taudem/\" > taudem sudo mv taudem /etc/paths.d/.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"finalize-your-installation-1","dir":"Articles","previous_headings":"","what":"Finalize your installation","title":"Install TauDEM","text":"done,","code":""},{"path":[]},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"add-taudem-to-the-path-1","dir":"Articles","previous_headings":"Finalize your installation > Register TauDEM in R","what":"Add TauDEM to the PATH","title":"Install TauDEM","text":"Windows installer might done automatically. operating systems (macOS, Linux) use usual method add directory PATH.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"or-add-an-environmental-variable-1","dir":"Articles","previous_headings":"Finalize your installation > Register TauDEM in R","what":"OR add an environmental variable","title":"Install TauDEM","text":"Add R environmental variable called TAUDEM_PATH points location TauDEM executables can found (Windows might C:\\Program Files\\TauDEM, Ubuntu /usr/local/taudem). instance Ubuntu adding line .Renviron (see usethis::edit_r_environ()) re-starting R: , just session, running line R code:","code":"TAUDEM_PATH='/usr/local/taudem' Sys.setenv(TAUDEM_PATH='/usr/local/taudem')"},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"check-your-installation-1","dir":"Articles","previous_headings":"Finalize your installation","what":"Check your installation","title":"Install TauDEM","text":"Run traudem::taudem_sitrep() read output carefully. Pay attention error might indicate part installation successful. well (error, normal output TauDEM), congratulations! system ready apply TauDEM data.","code":""},{"path":[]},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"gdal","dir":"Articles","previous_headings":"Linux","what":"GDAL","title":"Install TauDEM","text":"need install GDAL? terminal try gdalinfo --version, fails gdal-config --version. works return something need install GDAL unless want newer version. might installed GDAL past , say, using sf R package. need , install GDAL using official GDAL docs (refer TauDEM README suggestions). macOS might easy brew install gdal.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"mpi","dir":"Articles","previous_headings":"Linux","what":"MPI","title":"Install TauDEM","text":"First try running mpiexec --version terminal. works returns something, need install MPI unless want newer version. need , install MPI using official MPI docs (refer TauDEM README suggestions). macOS might easy brew install mpich.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"taudem","dir":"Articles","previous_headings":"Linux","what":"TauDEM","title":"Install TauDEM","text":"First need obtain TauDEM source GitHub https://github.com/dtarb/TauDEM/. ease , can clone repository. , find green button allows clone, open (GitHub CLI) download, download ZIP version. recommend using CMake TauDEM README also method using Make. Therefore, install CMake Make (check ’s already installed); follow TauDEM README suggestions) either CMake Make depending decided use. installation shows errors, try using https://github.com/maelle/TauDEM/tree/-mpi-deprecations instead. Even successful installation might see many warnings.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"finalize-your-installation-2","dir":"Articles","previous_headings":"","what":"Finalize your installation","title":"Install TauDEM","text":"done,","code":""},{"path":[]},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"add-taudem-to-the-path-2","dir":"Articles","previous_headings":"Finalize your installation > Register TauDEM in R","what":"Add TauDEM to the PATH","title":"Install TauDEM","text":"Windows installer might done automatically. operating systems (macOS, Linux) use usual method add directory PATH.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"or-add-an-environmental-variable-2","dir":"Articles","previous_headings":"Finalize your installation > Register TauDEM in R","what":"OR add an environmental variable","title":"Install TauDEM","text":"Add R environmental variable called TAUDEM_PATH points location TauDEM executables can found (Windows might C:\\Program Files\\TauDEM, Ubuntu /usr/local/taudem). instance Ubuntu adding line .Renviron (see usethis::edit_r_environ()) re-starting R: , just session, running line R code:","code":"TAUDEM_PATH='/usr/local/taudem' Sys.setenv(TAUDEM_PATH='/usr/local/taudem')"},{"path":"https://lucarraro.github.io/traudem/articles/taudem-installation.html","id":"check-your-installation-2","dir":"Articles","previous_headings":"Finalize your installation","what":"Check your installation","title":"Install TauDEM","text":"Run traudem::taudem_sitrep() read output carefully. Pay attention error might indicate part installation successful. well (error, normal output TauDEM), congratulations! system ready apply TauDEM data.","code":""},{"path":[]},{"path":"https://lucarraro.github.io/traudem/articles/traudem.html","id":"what-this-package-does","dir":"Articles","previous_headings":"Scope of traudem","what":"What this package does","title":"traudem","text":"provides guide installation TauDEM dependencies GDAL MPI depending operating system. checks TauDEM dependencies correctly installed included PATH. provides wrapper commands allow calling TauDEM methods R.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/traudem.html","id":"what-this-package-does-not","dir":"Articles","previous_headings":"Scope of traudem","what":"What this package does not","title":"traudem","text":"provide automatic installation TauDEM dependencies. Please refer vignette(\"taudem-installation\") instructions . provide extensive documentation functioning TauDEM commands. Please refer original TauDEM documentation .","code":""},{"path":"https://lucarraro.github.io/traudem/articles/traudem.html","id":"can-traudem-run-all-taudem-methods","dir":"Articles","previous_headings":"Scope of traudem","what":"Can traudem run all TauDEM methods?","title":"traudem","text":"Yes! TauDEM methods dedicated wrappers like taudem_pitremove(), argument names strived make informative. methods, can use taudem_exec() provide arguments TauDEM CLI expect . make PR repository add dedicated wrappers.","code":""},{"path":"https://lucarraro.github.io/traudem/articles/traudem.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"traudem","text":"Refer vignette(\"taudem-installation\", package = \"traudem\"). particular installing TauDEM CLI dependencies well R package, please run traudem::taudem_sitrep(). can install development version traudem R-universe: GitHub :","code":"traudem::taudem_sitrep() #> ✔ Found GDAL version 3.0.4. #> ✔ Found mpiexec (OpenRTE) 4.0.3 (MPI). #> ✔ Found TauDEM path (/usr/local/taudem). #> ✔ Found TauDEM executables directory (/usr/local/taudem). #> ✔ Found all TauDEM executables. #> ℹ Testing TauDEM on an example file (please wait a bit)... #> ── TauDEM output ───────────────────────────────────────────────────────────────── #> PitRemove version 5.3.9 #> Input file DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.007304 #> Data read time: 0.003052 #> Compute time: 0.035886 #> Write time: 0.002312 #> Total time: 0.048554 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. #> ── End of TauDEM output ────────────────────────────────────────────────────────── #> ✔ Was able to launch a TauDEM example! #> ! Make sure you see no serious error message above. # Enable repository from lucarraro options(   repos = c(     lucarraro = 'https://lucarraro.r-universe.dev',     CRAN = 'https://cloud.r-project.org'   ) ) # Download and install traudem in R install.packages('traudem') # install.packages(\"devtools\") devtools::install_github(\"lucarraro/traudem\")"},{"path":"https://lucarraro.github.io/traudem/articles/traudem.html","id":"simple-example","dir":"Articles","previous_headings":"","what":"Simple example","title":"traudem","text":"use traudem launch TauDEM’s PitRemove: ran example temporary directory withr automatically deletes. want automatically get rid intermediary files created TauDEM one pipelines, might interested withr::local_tempfile(). wanted run code without seeing messages TauDEM can either use quiet argument: set traudem.quiet option (options(traudem.quiet = TRUE) just session, withr::local_options(traudem.quiet = TRUE)):","code":"library(traudem) test_dir <- withr::local_tempdir() fs::file_copy(   system.file(\"test-data\", \"DEM.tif\", package = \"traudem\"),   file.path(test_dir, \"DEM.tif\") ) output <- taudem_pitremove(file.path(test_dir, \"DEM.tif\")) #> PitRemove version 5.3.9 #> Input file /tmp/RtmpdGKRyh/file69f579638367/DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.008291 #> Data read time: 0.003158 #> Compute time: 0.024729 #> Write time: 0.001945 #> Total time: 0.038122 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. output #> [1] \"/tmp/RtmpdGKRyh/file69f579638367/DEMfel.tif\" test_dir <- withr::local_tempdir() fs::file_copy(   system.file(\"test-data\", \"DEM.tif\", package = \"traudem\"),   file.path(test_dir, \"DEM.tif\") ) output <- taudem_pitremove(file.path(test_dir, \"DEM.tif\"), quiet = TRUE) output #> [1] \"/tmp/RtmpdGKRyh/file69f558d6d3aa/DEMfel.tif\" withr::local_options(traudem.quiet = TRUE) test_dir <- withr::local_tempdir() fs::file_copy(   system.file(\"test-data\", \"DEM.tif\", package = \"traudem\"),   file.path(test_dir, \"DEM.tif\") ) output <- taudem_pitremove(file.path(test_dir, \"DEM.tif\")) output #> [1] \"/tmp/RtmpdGKRyh/file69f5f1debd0/DEMfel.tif\""},{"path":"https://lucarraro.github.io/traudem/articles/traudem.html","id":"full-example-download-dem-data-and-extract-a-river-network","dir":"Articles","previous_headings":"","what":"Full example: download DEM data and extract a river network","title":"traudem","text":"traudem can used combination R-package elevatr extract river network elevation data retrieved web. following example shows derive contour catchment drainage area values cells within contour using D8 flow direction algorithm. required inputs : coordinates catchment outlet; coordinates lower-left top-right corners rectangular area containing catchment interest; EPSG code corresponding projection used express coordinate data (see also http://www.epsg-registry.org); zoom level DEM data extracted (see elevatr documentation).   total area extracted catchment 363 km^2.","code":"library(elevatr) library(sf) library(terra) library(traudem) library(shapefiles) library(withr)  taudem_sitrep() # verify that TauDEM is correctly installed  #> ✔ Found GDAL version 3.0.4. #> ✔ Found mpiexec (OpenRTE) 4.0.3 (MPI). #> ✔ Found TauDEM path (/usr/local/taudem). #> ✔ Found TauDEM executables directory (/usr/local/taudem). #> ✔ Found all TauDEM executables. #> ℹ Testing TauDEM on an example file (please wait a bit)... #> ── TauDEM output ───────────────────────────────────────────────────────────────── #> PitRemove version 5.3.9 #> Input file DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.008202 #> Data read time: 0.003557 #> Compute time: 0.025951 #> Write time: 0.001925 #> Total time: 0.039635 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. #> ── End of TauDEM output ────────────────────────────────────────────────────────── #> ✔ Was able to launch a TauDEM example! #> ! Make sure you see no serious error message above.  test_dir <- local_tempdir() # temporary directory storing intermediary files created by TauDEM  # Input data for the river Wigger (central Switzerland) EPSG <- 21781   # EPSG code corresponding to CH1903 (Swiss projected coordinate system)  x_outlet <- 637478 # outlet x coordinate in CH1903 coordinates y_outlet <- 237413 # outlet y coordinate in CH1903 coordinates x_ll <- 620000 # x coordinate of the lower-left (SW) limit of the region x_tr <- 660000 # x coordinate of the top-right (NE) limit of the region  y_ll <- 200000 # y coordinate of the lower-left (SW) limit of the region     y_tr <- 250000 # y coordinate of the top-right (NE) limit of the region zoom <- 9 # corresponds to cellsize ~= 100 m at the latitude of interest  # use elevatr to download DEM  loc.df <- data.frame(x=c(x_ll, x_tr), y=c(y_ll,y_tr)) r <- rast() crs(r) <- paste0(\"epsg:\", EPSG) crs_str <- crs(r)  z <- get_elev_raster(locations = loc.df, prj = crs_str, z = zoom, verbose = F)  #>  #>  Accessing raster elevation [-------------------------]   0%  Accessing raster elevation [=====>-------------------]  25%  Accessing raster elevation [===========>-------------]  50%  Accessing raster elevation [==================>------]  75%  Accessing raster elevation [=========================] 100% #> Mosaicing & Projecting z <- rast(z) z <- crop(z, ext(x_ll, x_tr, y_ll, y_tr)) # reclassify: all pixels with elev=NA are set to 0. Then the pit remove algorithm will take care of them z <- classify(z, matrix(c(NA, NA, 0), 1, 3))   writeRaster(z, filename = file.path(test_dir, \"DEM.tif\")) # write elevation raster to temporary directory  # apply TauDEM functions # Remove pits out_fel <- taudem_pitremove(file.path(test_dir, \"DEM.tif\"), quiet = TRUE)  # D8 flow directions out_p <- taudem_d8flowdir(out_fel, quiet = TRUE) out_p <- out_p$output_d8flowdir_grid # file path of flow direction file  # Contributing area out_ad8 <- taudem_aread8(out_p, quiet = TRUE)  # Threshold out_src <- taudem_threshold(out_ad8, quiet = TRUE)  # create shapefile with approximate outlet location shp.point <- function(x, y, sname = \"shape\"){ # function to create point shapefile given coordinates    n <- length(x)   dd <- data.frame(Id = 1:n, X = x, Y = y)   ddTable <- data.frame(Id = c(1), Name = paste(\"Outlet\", 1:n, sep = \"\"))   ddShapefile <- convert.to.shapefile(dd, ddTable, \"Id\", 1)   write.shapefile(ddShapefile, sname, arcgis = T)   invisible(paste0(sname,\".shp\")) }  out_shp <-  shp.point(x_outlet, y_outlet, file.path(test_dir, \"ApproxOutlet\"))  # Move outlet to stream out_moved.shp <- taudem_moveoutletstostream(out_p, out_src, outlet_file = out_shp,                                              output_moved_outlets_file = file.path(test_dir, \"Outlet.shp\"),                                              quiet = TRUE)  # Contributing area upstream of outlet out_ssa <- taudem_aread8(out_p, outlet_file = out_moved.shp, quiet = TRUE)  # Derive catchment contour ssa <- rast(out_ssa) # reclassify: pixels within the catchment have value 1, others 0 ssa_cont <- classify(ssa, matrix(c(NA, NA, 0, 1, Inf, 1), 2, 3, byrow = T))   # plot DEM of the region and catchment contours plot(z, col = terrain.colors(1000), range = c(0,1200)) contour(ssa_cont, add = T, labels = \"\")  title(\"DEM and catchment contour\") # plot map of drainage area within the catchment plot(ssa, col = hcl.colors(1000, \"viridis\")) title(\"Drainage area [no. cells]\") # total catchment area  ssa_log <- ssa values(ssa_log) <- log10(values(ssa)) plot(ssa_log, col = hcl.colors(1000, \"viridis\")) title(\"Drainage area [log10(no. cells)]\") cellsize <- sqrt(prod(res(z))) # cellsize is geometric mean of downloaded raster resolution  max(values(ssa),na.rm=T)*cellsize^2 # total catchment area in m^2 #> [1] 363822337"},{"path":"https://lucarraro.github.io/traudem/articles/traudem.html","id":"what-should-i-do-if-i-do-not-retrieve-the-desired-catchment","dir":"Articles","previous_headings":"","what":"What should I do if I do not retrieve the desired catchment?","title":"traudem","text":"might happen , even coordinates catchment outlet precisely attributed, obtained catchment shape desired one (particular, much smaller sought one). might due issues determining correct outlet position extracted river network. fact, outlet position moved downslope initial, user-specified location (x_outlet, y_outlet) closest stream cell via function taudem_moveoutletstostream. Depending terrain topography DEM resolution, extracted river network might overlap exactly real river networks, hence possible errors. solve issue, suggested : Slightly change coordinates x_outlet, y_outlet, better align input outlet location extracted stream cells. Change argument threshold_parameter taudem_threshold. Stream cells defined cells drainage area smaller threshold_parameter (expressed number cells). threshold_parameter large, actual outlet location moved far away downstream direction; small, actual outlet location moved enough downstream direction.","code":""},{"path":"https://lucarraro.github.io/traudem/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Maëlle Salmon. Author. Luca Carraro. Maintainer, author. Wael Sadek. Author.","code":""},{"path":"https://lucarraro.github.io/traudem/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Salmon M, Carraro L, Sadek W (2022). traudem: Use 'TauDEM'. https://lucarraro.github.io/traudem/, https://github.com/lucarraro/traudem.","code":"@Manual{,   title = {traudem: Use 'TauDEM'},   author = {Maëlle Salmon and Luca Carraro and Wael Sadek},   year = {2022},   note = {https://lucarraro.github.io/traudem/, https://github.com/lucarraro/traudem}, }"},{"path":"https://lucarraro.github.io/traudem/index.html","id":"traudem","dir":"","previous_headings":"","what":"Use TauDEM","title":"Use TauDEM","text":"goal traudem wrap TauDEM CLI R.","code":""},{"path":[]},{"path":"https://lucarraro.github.io/traudem/index.html","id":"what-this-package-does","dir":"","previous_headings":"Scope of traudem","what":"What this package does","title":"Use TauDEM","text":"provides guide installation TauDEM dependencies GDAL MPI depending operating system. checks TauDEM dependencies correctly installed included PATH.","code":""},{"path":"https://lucarraro.github.io/traudem/index.html","id":"what-this-package-does-not","dir":"","previous_headings":"Scope of traudem","what":"What this package does not","title":"Use TauDEM","text":"provide automatic installation TauDEM dependencies. Please refer vignette(\"taudem-installation\") instructions . provide extensive documentation functioning TauDEM commands. Please refer original TauDEM documentation .","code":""},{"path":"https://lucarraro.github.io/traudem/index.html","id":"can-traudem-run-all-taudem-methods","dir":"","previous_headings":"Scope of traudem","what":"Can traudem run all TauDEM methods?","title":"Use TauDEM","text":"Yes! TauDEM methods dedicated wrappers like taudem_pitremove(), argument names strived make informative. methods, can use taudem_exec() provide arguments TauDEM CLI expect . make PR repository add dedicated wrappers.","code":""},{"path":"https://lucarraro.github.io/traudem/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Use TauDEM","text":"Refer vignette(\"taudem-installation\", package = \"traudem\"). particular installing TauDEM CLI dependencies well R package, please run traudem::taudem_sitrep(). can install development version traudem R-universe: GitHub :","code":"traudem::taudem_sitrep() #> ✔ Found GDAL version 3.0.4. #> ✔ Found mpiexec (OpenRTE) 4.0.3 (MPI). #> ✔ Found TauDEM path (/usr/local/taudem). #> ✔ Found TauDEM executables directory (/usr/local/taudem). #> ✔ Found all TauDEM executables. #> ℹ Testing TauDEM on an example file (please wait a bit)... #> ── TauDEM output ─────────────────────────────────────────────────────────────── #> PitRemove version 5.3.9 #> Input file DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.006093 #> Data read time: 0.002055 #> Compute time: 0.021402 #> Write time: 0.001977 #> Total time: 0.031527 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. #> ── End of TauDEM output ──────────────────────────────────────────────────────── #> ✔ Was able to launch a TauDEM example! #> ! Make sure you see no serious error message above. # Enable repository from lucarraro options(   repos = c(     lucarraro = 'https://lucarraro.r-universe.dev',     CRAN = 'https://cloud.r-project.org'   ) ) # Download and install traudem in R install.packages('traudem') # install.packages(\"devtools\") devtools::install_github(\"lucarraro/traudem\")"},{"path":"https://lucarraro.github.io/traudem/index.html","id":"simple-example","dir":"","previous_headings":"","what":"Simple example","title":"Use TauDEM","text":"use traudem launch TauDEM’s PitRemove: ran example temporary directory withr automatically deletes. want automatically get rid intermediary files created TauDEM one pipelines, might interested withr::local_tempfile(). wanted run code without seeing messages TauDEM can either use quiet argument: set traudem.quiet option (options(traudem.quiet = TRUE) just session, withr::local_options(traudem.quiet = TRUE)):","code":"library(traudem) test_dir <- withr::local_tempdir() fs::file_copy(   system.file(\"test-data\", \"DEM.tif\", package = \"traudem\"),   file.path(test_dir, \"DEM.tif\") ) output <- taudem_pitremove(file.path(test_dir, \"DEM.tif\")) #> PitRemove version 5.3.9 #> Input file /tmp/RtmpNAReAM/file3a82160ba44d/DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.009133 #> Data read time: 0.002737 #> Compute time: 0.024473 #> Write time: 0.001969 #> Total time: 0.038313 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. output #> [1] \"/tmp/RtmpNAReAM/file3a82160ba44d/DEMfel.tif\" test_dir <- withr::local_tempdir() fs::file_copy(   system.file(\"test-data\", \"DEM.tif\", package = \"traudem\"),   file.path(test_dir, \"DEM.tif\") ) output <- taudem_pitremove(file.path(test_dir, \"DEM.tif\"), quiet = TRUE) output #> [1] \"/tmp/RtmpNAReAM/file3a823cfec7cd/DEMfel.tif\" withr::local_options(traudem.quiet = TRUE) test_dir <- withr::local_tempdir() fs::file_copy(   system.file(\"test-data\", \"DEM.tif\", package = \"traudem\"),   file.path(test_dir, \"DEM.tif\") ) output <- taudem_pitremove(file.path(test_dir, \"DEM.tif\")) output #> [1] \"/tmp/RtmpNAReAM/file3a824846dcdd/DEMfel.tif\""},{"path":"https://lucarraro.github.io/traudem/index.html","id":"full-example-download-dem-data-and-extract-a-river-network","dir":"","previous_headings":"","what":"Full example: download DEM data and extract a river network","title":"Use TauDEM","text":"traudem can used combination R-package elevatr extract river network elevation data retrieved web. following example shows derive contour catchment drainage area values cells within contour using D8 flow direction algorithm. required inputs : coordinates catchment outlet; coordinates lower-left top-right corners rectangular area containing catchment interest; EPSG code corresponding projection used express coordinate data (see also http://www.epsg-registry.org); zoom level DEM data extracted (see elevatr documentation).  total area extracted catchment 363.82 km2.","code":"library(elevatr) library(sf) #> Linking to GEOS 3.8.0, GDAL 3.0.4, PROJ 6.3.1; sf_use_s2() is TRUE library(terra) #> terra 1.6.17 library(traudem) library(shapefiles) #> Loading required package: foreign #>  #> Attaching package: 'shapefiles' #> The following objects are masked from 'package:foreign': #>  #>     read.dbf, write.dbf library(withr)  taudem_sitrep() # verify that TauDEM is correctly installed  #> ✔ Found GDAL version 3.0.4. #> ✔ Found mpiexec (OpenRTE) 4.0.3 (MPI). #> ✔ Found TauDEM path (/usr/local/taudem). #> ✔ Found TauDEM executables directory (/usr/local/taudem). #> ✔ Found all TauDEM executables. #> ℹ Testing TauDEM on an example file (please wait a bit)... #> ── TauDEM output ─────────────────────────────────────────────────────────────── #> PitRemove version 5.3.9 #> Input file DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.005605 #> Data read time: 0.001709 #> Compute time: 0.022103 #> Write time: 0.001790 #> Total time: 0.031207 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. #> ── End of TauDEM output ──────────────────────────────────────────────────────── #> ✔ Was able to launch a TauDEM example! #> ! Make sure you see no serious error message above.  test_dir <- local_tempdir() # temporary directory storing intermediary files created by TauDEM  # Input data for the river Wigger (central Switzerland) EPSG <- 21781   # EPSG code corresponding to CH1903 (Swiss projected coordinate system)  x_outlet <- 637478 # outlet x coordinate in CH1903 coordinates y_outlet <- 237413 # outlet y coordinate in CH1903 coordinates x_ll <- 620000 # x coordinate of the lower-left (SW) limit of the region x_tr <- 660000 # x coordinate of the top-right (NE) limit of the region  y_ll <- 200000 # y coordinate of the lower-left (SW) limit of the region     y_tr <- 250000 # y coordinate of the top-right (NE) limit of the region zoom <- 9 # corresponds to cellsize ~= 100 m at the latitude of interest  # use elevatr to download DEM  loc.df <- data.frame(x=c(x_ll, x_tr), y=c(y_ll,y_tr)) r <- rast() crs(r) <- paste0(\"epsg:\", EPSG) crs_str <- crs(r)  z <- get_elev_raster(locations = loc.df, prj = crs_str, z = zoom, verbose = F)  #> Warning in showSRID(SRS_string, format = \"PROJ\", multiline = \"NO\", prefer_proj = prefer_proj): PROJ/GDAL PROJ string degradation in workflow #>  repeated warnings suppressed #>  Discarded datum CH1903 in Proj4 definition #> Mosaicing & Projecting z <- rast(z) z <- crop(z, ext(x_ll, x_tr, y_ll, y_tr)) # reclassify: all pixels with elev=NA are set to 0. Then the pit remove algorithm will take care of them z <- classify(z, matrix(c(NA, NA, 0), 1, 3))   writeRaster(z, filename = file.path(test_dir, \"DEM.tif\")) # write elevation raster to temporary directory  # apply TauDEM functions # Remove pits out_fel <- taudem_pitremove(file.path(test_dir, \"DEM.tif\"), quiet = TRUE)  # D8 flow directions out_p <- taudem_d8flowdir(out_fel, quiet = TRUE) out_p <- out_p$output_d8flowdir_grid # file path of flow direction file  # Contributing area out_ad8 <- taudem_aread8(out_p, quiet = TRUE)  # Threshold out_src <- taudem_threshold(out_ad8, quiet = TRUE)  # create shapefile with approximate outlet location shp.point <- function(x, y, sname = \"shape\"){ # function to create point shapefile given coordinates    n <- length(x)   dd <- data.frame(Id = 1:n, X = x, Y = y)   ddTable <- data.frame(Id = c(1), Name = paste(\"Outlet\", 1:n, sep = \"\"))   ddShapefile <- convert.to.shapefile(dd, ddTable, \"Id\", 1)   write.shapefile(ddShapefile, sname, arcgis = T)   invisible(paste0(sname,\".shp\")) }  out_shp <-  shp.point(x_outlet, y_outlet, file.path(test_dir, \"ApproxOutlet\"))  # Move outlet to stream out_moved.shp <- taudem_moveoutletstostream(out_p, out_src, outlet_file = out_shp,                                              output_moved_outlets_file = file.path(test_dir, \"Outlet.shp\"),                                              quiet = TRUE)  # Contributing area upstream of outlet out_ssa <- taudem_aread8(out_p, outlet_file = out_moved.shp, quiet = TRUE)  # Derive catchment contour ssa <- rast(out_ssa) # reclassify: pixels within the catchment have value 1, others 0 ssa_cont <- classify(ssa, matrix(c(NA, NA, 0, 1, Inf, 1), 2, 3, byrow = T))   # plot DEM of the region and catchment contours plot(z, col = terrain.colors(1000), range = c(0,1200)) contour(ssa_cont, add = T, labels = \"\")  #> Backtrace: #>   1. graphics::contour(ssa_cont, add = T, labels = \"\") #>  11. methods (local) `<fn>`(`<env>`) title(\"DEM and catchment contour\") # plot map of drainage area within the catchment plot(ssa, col = hcl.colors(1000, \"viridis\")) title(\"Drainage area [no. cells]\") # total catchment area  ssa_log <- ssa values(ssa_log) <- log10(values(ssa)) plot(ssa_log, col = hcl.colors(1000, \"viridis\")) title(\"Drainage area [log10(no. cells)]\")"},{"path":"https://lucarraro.github.io/traudem/index.html","id":"what-should-i-do-if-i-do-not-retrieve-the-desired-catchment","dir":"","previous_headings":"","what":"What should I do if I do not retrieve the desired catchment?","title":"Use TauDEM","text":"might happen , even coordinates catchment outlet precisely attributed, obtained catchment shape desired one (particular, much smaller sought one). might due issues determining correct outlet position extracted river network. fact, outlet position moved downslope initial, user-specified location (x_outlet, y_outlet) closest stream cell via function taudem_moveoutletstostream. Depending terrain topography DEM resolution, extracted river network might overlap exactly real river networks, hence possible errors. solve issue, suggested : Slightly change coordinates x_outlet, y_outlet, better align input outlet location extracted stream cells. Change argument threshold_parameter taudem_threshold. Stream cells defined cells drainage area smaller threshold_parameter (expressed number cells). threshold_parameter large, actual outlet location moved far away downstream direction; small, actual outlet location moved enough downstream direction.","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_aread8.html","id":null,"dir":"Reference","previous_headings":"","what":"D8 Contributing Area — taudem_aread8","title":"D8 Contributing Area — taudem_aread8","text":"D8 Contributing Area","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_aread8.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"D8 Contributing Area — taudem_aread8","text":"","code":"taudem_aread8(   input_d8flowdir_grid,   output_contributing_area_grid = NULL,   check_edge_contamination = TRUE,   n_processes = getOption(\"traudem.n_processes\", 1),   wg_file = NULL,   outlet_file = NULL,   outlet_layer_name = NULL,   outlet_layer_number = NULL,   quiet = getOption(\"traudem.quiet\", FALSE) )"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_aread8.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"D8 Contributing Area — taudem_aread8","text":"input_d8flowdir_grid Input flow directions grid output_contributing_area_grid Output contributing area grid check_edge_contamination Whether check edge contamination n_processes Number processes mpiexec. NULL TauDEM called without mpiexec. wg_file Input weight grid (optional) outlet_file input outlets file (OGR readable dataset, optional) outlet_layer_name OGR layer name outlets first layer outlet_file (optional). Layer name layer number specified. outlet_layer_number OGR layer number outlets first layer outlet_file (optional). Layer name layer number specified. quiet FALSE output TauDEM CLI suppressed.","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_aread8.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"D8 Contributing Area — taudem_aread8","text":"Path output file (invisibly)","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_aread8.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"D8 Contributing Area — taudem_aread8","text":"See https://hydrology.usu.edu/taudem/taudem5/help53/D8ContributingArea.html","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_aread8.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"D8 Contributing Area — taudem_aread8","text":"","code":"# \\dontrun{ test_dir <- withr::local_tempdir() dir.create(test_dir)  file.copy(    system.file(\"test-data\", \"DEM.tif\", package = \"traudem\"),    file.path(test_dir, \"DEM.tif\")  ) #> [1] TRUE filled_pit <- taudem_pitremove(file.path(test_dir, \"DEM.tif\")) #> PitRemove version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d799ac972/DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.009109 #> Data read time: 0.000916 #> Compute time: 0.007086 #> Write time: 0.008543 #> Total time: 0.025654 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. outputs <- taudem_d8flowdir(filled_pit) #> D8FlowDir version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d799ac972/DEMfel.tif has projected coordinate system. #> Nodata value input to create partition from file: -300000000549775575777803994281145270272.000000 #> Nodata value recast to float used in partition raster: -300000000549775575777803994281145270272.000000 #> Processors: 1 #> Header read time: 0.003108 #> Data read time: 0.000912 #> Compute Slope time: 0.005755 #> Write Slope time: 0.002307 #> Resolve Flat time: 0.000031 #> Write Flat time: 0.001142 #> Total time: 0.013255 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. #> All slopes evaluated. 0 flats to resolve. outputs #> $output_d8flowdir_grid #> [1] \"/tmp/Rtmpy86iNE/file4b8d799ac972/DEMfeld8flowdir.tif\" #>  #> $output_d8slopes_grid #> [1] \"/tmp/Rtmpy86iNE/file4b8d799ac972/DEMfeld8slopes.tif\" #>  contributing_area_grid <- taudem_aread8(outputs$output_d8flowdir_grid) #> AreaD8 version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d799ac972/DEMfeld8flowdir.tif has projected coordinate system. #> Nodata value input to create partition from file: -32768.000000 #> Nodata value recast to int16_t used in partition raster: -32768 #> Number of Processes: 1 #> Read time: 0.003437 #> Compute time: 0.006806 #> Write time: 0.001424 #> Total time: 0.011667 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. contributing_area_grid #> [1] \"/tmp/Rtmpy86iNE/file4b8d799ac972/DEMfeld8flowdirctb.tif\" # }"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_d8flowdir.html","id":null,"dir":"Reference","previous_headings":"","what":"D8 Flow Directions — taudem_d8flowdir","title":"D8 Flow Directions — taudem_d8flowdir","text":"D8 Flow Directions","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_d8flowdir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"D8 Flow Directions — taudem_d8flowdir","text":"","code":"taudem_d8flowdir(   input_elevation_grid,   output_d8flowdir_grid = NULL,   output_d8slopes_grid = NULL,   n_processes = getOption(\"traudem.n_processes\", 1),   quiet = getOption(\"traudem.quiet\", FALSE) )"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_d8flowdir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"D8 Flow Directions — taudem_d8flowdir","text":"input_elevation_grid Pit filled elevation input data output_d8flowdir_grid D8 flow directions output output_d8slopes_grid D8 slopes output n_processes Number processes mpiexec. NULL TauDEM called without mpiexec. quiet FALSE output TauDEM CLI suppressed.","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_d8flowdir.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"D8 Flow Directions — taudem_d8flowdir","text":"List two output filenames","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_d8flowdir.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"D8 Flow Directions — taudem_d8flowdir","text":"See https://hydrology.usu.edu/taudem/taudem5/help53/D8FlowDirections.html","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_d8flowdir.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"D8 Flow Directions — taudem_d8flowdir","text":"","code":"# \\dontrun{ test_dir <- withr::local_tempdir() dir.create(test_dir)  file.copy(    system.file(\"test-data\", \"DEM.tif\", package = \"traudem\"),    file.path(test_dir, \"DEM.tif\")  ) #> [1] TRUE filled_pit <- taudem_pitremove(file.path(test_dir, \"DEM.tif\")) #> PitRemove version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d4668c9c9/DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.003265 #> Data read time: 0.001377 #> Compute time: 0.007023 #> Write time: 0.002290 #> Total time: 0.013955 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. outputs <- taudem_d8flowdir(filled_pit) #> D8FlowDir version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d4668c9c9/DEMfel.tif has projected coordinate system. #> Nodata value input to create partition from file: -300000000549775575777803994281145270272.000000 #> Nodata value recast to float used in partition raster: -300000000549775575777803994281145270272.000000 #> Processors: 1 #> Header read time: 0.004163 #> Data read time: 0.000964 #> Compute Slope time: 0.005753 #> Write Slope time: 0.002134 #> Resolve Flat time: 0.000029 #> Write Flat time: 0.001077 #> Total time: 0.014119 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. #> All slopes evaluated. 0 flats to resolve. outputs #> $output_d8flowdir_grid #> [1] \"/tmp/Rtmpy86iNE/file4b8d4668c9c9/DEMfeld8flowdir.tif\" #>  #> $output_d8slopes_grid #> [1] \"/tmp/Rtmpy86iNE/file4b8d4668c9c9/DEMfeld8slopes.tif\" #>  # }"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_exec.html","id":null,"dir":"Reference","previous_headings":"","what":"Call TauDEM — taudem_exec","title":"Call TauDEM — taudem_exec","text":"Call TauDEM","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_exec.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Call TauDEM — taudem_exec","text":"","code":"taudem_exec(   args,   n_processes = getOption(\"traudem.n_processes\", 1),   quiet = getOption(\"traudem.quiet\", FALSE) )"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_exec.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Call TauDEM — taudem_exec","text":"args Character vector argument, starting TauDEM command. See examples. n_processes Number processes mpiexec. NULL TauDEM called without mpiexec. quiet FALSE output TauDEM CLI suppressed.","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_exec.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Call TauDEM — taudem_exec","text":"TRUE call successful, FALSE otherwise.","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_exec.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Call TauDEM — taudem_exec","text":"can use function call TauDEM methods ones dedicated wrappers package. Please refer relative TauDEM function documentation syntax used specify optional arguments. See also examples.","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_exec.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Call TauDEM — taudem_exec","text":"","code":"# \\dontrun{ test_dir <- withr::local_tempdir() dir.create(test_dir) file.copy(    system.file(\"test-data\", \"DEM.tif\", package = \"traudem\"),    file.path(test_dir, \"DEM.tif\")  ) #> [1] TRUE  # Default name for output file, only input command and input filename. taudem_exec(c(\"pitremove\", file.path(test_dir, \"DEM.tif\"))) #> PitRemove version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d1ef7e195/DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.002920 #> Data read time: 0.000903 #> Compute time: 0.007764 #> Write time: 0.002988 #> Total time: 0.014575 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. #> [1] TRUE  # syntax for user-attributed output file name taudem_exec(   c(   \"pitremove\",   \"-z\", file.path(test_dir, \"DEM.tif\"),   \"-fel\", file.path(test_dir,\"filled_pits.tif\"))  ) #> PitRemove version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d1ef7e195/DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.003465 #> Data read time: 0.000923 #> Compute time: 0.007039 #> Write time: 0.002228 #> Total time: 0.013654 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. #> [1] TRUE # }"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_moveoutletstostream.html","id":null,"dir":"Reference","previous_headings":"","what":"Move Outlets To Streams — taudem_moveoutletstostream","title":"Move Outlets To Streams — taudem_moveoutletstostream","text":"Move Outlets Streams","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_moveoutletstostream.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Move Outlets To Streams — taudem_moveoutletstostream","text":"","code":"taudem_moveoutletstostream(   input_d8flowdir_grid,   input_stream_raster_grid,   output_moved_outlets_file = NULL,   om_layer_name = NULL,   max_dist = NULL,   outlet_file,   outlet_layer_name = NULL,   outlet_layer_number = NULL,   n_processes = getOption(\"traudem.n_processes\", 1),   quiet = getOption(\"traudem.quiet\", FALSE) )"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_moveoutletstostream.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Move Outlets To Streams — taudem_moveoutletstostream","text":"input_d8flowdir_grid File name D8 flow direction grid (input). input_stream_raster_grid File name stream raster grid (input). output_moved_outlets_file Output OGR file outlets moved om_layer_name layer name movedoutletsfile (Optional) max_dist maximum number grid cells traverse moving outlet points (Optional) outlet_file input outlets file (OGR readable dataset) outlet_layer_name OGR layer name outlets first layer outlet_file (optional). Layer name layer number specified. outlet_layer_number OGR layer number outlets first layer outlet_file (optional). Layer name layer number specified. n_processes Number processes mpiexec. NULL TauDEM called without mpiexec. quiet FALSE output TauDEM CLI suppressed.","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_moveoutletstostream.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Move Outlets To Streams — taudem_moveoutletstostream","text":"Path output file (invisibly)","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_moveoutletstostream.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Move Outlets To Streams — taudem_moveoutletstostream","text":"See https://hydrology.usu.edu/taudem/taudem5/help53/MoveOutletsToStreams.html","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_pitremove.html","id":null,"dir":"Reference","previous_headings":"","what":"Pit Remove — taudem_pitremove","title":"Pit Remove — taudem_pitremove","text":"Pit Remove","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_pitremove.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pit Remove — taudem_pitremove","text":"","code":"taudem_pitremove(   input_elevation_grid,   output_elevation_grid = NULL,   only_4way_neighbors = FALSE,   n_processes = getOption(\"traudem.n_processes\", 1),   depmask = NULL,   quiet = getOption(\"traudem.quiet\", FALSE) )"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_pitremove.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pit Remove — taudem_pitremove","text":"input_elevation_grid Input elevation grid file output_elevation_grid Output elevation grid file only_4way_neighbors Whether consider 4 way neighbors n_processes Number processes mpiexec. NULL TauDEM called without mpiexec. depmask Depression mask file (optional) quiet FALSE output TauDEM CLI suppressed.","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_pitremove.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pit Remove — taudem_pitremove","text":"Path output file (invisibly)","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_pitremove.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Pit Remove — taudem_pitremove","text":"See https://hydrology.usu.edu/taudem/taudem5/help53/PitRemove.html","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_pitremove.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Pit Remove — taudem_pitremove","text":"","code":"# \\dontrun{ test_dir <- withr::local_tempdir() dir.create(test_dir)  file.copy(    system.file(\"test-data\", \"DEM.tif\", package = \"traudem\"),    file.path(test_dir, \"DEM.tif\")  ) #> [1] TRUE output <- taudem_pitremove(file.path(test_dir, \"DEM.tif\")) #> PitRemove version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d59a90f84/DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.002958 #> Data read time: 0.000901 #> Compute time: 0.006914 #> Write time: 0.002889 #> Total time: 0.013662 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. output #> [1] \"/tmp/Rtmpy86iNE/file4b8d59a90f84/DEMfel.tif\" # }"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_sitrep.html","id":null,"dir":"Reference","previous_headings":"","what":"TauDEM situation report — taudem_sitrep","title":"TauDEM situation report — taudem_sitrep","text":"Checks installation TauDEM provides useful hints.","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_sitrep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"TauDEM situation report — taudem_sitrep","text":"","code":"taudem_sitrep()"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_sitrep.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"TauDEM situation report — taudem_sitrep","text":"None","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_sitrep.html","id":"taudem-installation-and-registration","dir":"Reference","previous_headings":"","what":"TauDEM installation and registration","title":"TauDEM situation report — taudem_sitrep","text":"installed TauDEM add environment variable pointing correct path. instance Ubuntu adding line .Renviron (see usethis::edit_r_environ()) re-starting R:   , just session, running line R code:","code":"TAUDEM_PATH='/usr/local/taudem' Sys.setenv(TAUDEM_PATH='/usr/local/taudem')"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_sitrep.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"TauDEM situation report — taudem_sitrep","text":"","code":"# \\dontrun{ try(taudem_sitrep(), silent = TRUE) #> ✔ Found GDAL version 3.0.4. #> ✔ Found HYDRA build details: (MPI). #> ✔ Found TauDEM path (/home/runner/TauDEM/bin). #> ✔ Found TauDEM executables directory (/home/runner/TauDEM/bin). #> ✔ Found all TauDEM executables. #> ℹ Testing TauDEM on an example file (please wait a bit)... #> ── TauDEM output ─────────────────────────────────────────────────────────────── #> PitRemove version 5.3.9 #> Input file DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.003741 #> Data read time: 0.000931 #> Compute time: 0.011465 #> Write time: 0.002564 #> Total time: 0.018701 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. #> ── End of TauDEM output ──────────────────────────────────────────────────────── #> ✔ Was able to launch a TauDEM example! #> ! Make sure you see no serious error message above. # }"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_threshold.html","id":null,"dir":"Reference","previous_headings":"","what":"Stream Definition By Threshold — taudem_threshold","title":"Stream Definition By Threshold — taudem_threshold","text":"Stream Definition Threshold","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_threshold.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stream Definition By Threshold — taudem_threshold","text":"","code":"taudem_threshold(   input_area_grid,   output_stream_raster_grid = NULL,   mask_file = NULL,   threshold_parameter = 100,   n_processes = getOption(\"traudem.n_processes\", 1),   quiet = getOption(\"traudem.quiet\", FALSE) )"},{"path":"https://lucarraro.github.io/traudem/reference/taudem_threshold.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stream Definition By Threshold — taudem_threshold","text":"input_area_grid File name grid thresholded. output_stream_raster_grid File name stream raster grid. mask_file File name grid used mask output stream raster, general thresholded grid. threshold_parameter Threshold parameter. n_processes Number processes mpiexec. NULL TauDEM called without mpiexec. quiet FALSE output TauDEM CLI suppressed.","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_threshold.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stream Definition By Threshold — taudem_threshold","text":"Path output file (invisibly)","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_threshold.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Stream Definition By Threshold — taudem_threshold","text":"See https://hydrology.usu.edu/taudem/taudem5/help53/StreamDefinitionByThreshold.html","code":""},{"path":"https://lucarraro.github.io/traudem/reference/taudem_threshold.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Stream Definition By Threshold — taudem_threshold","text":"","code":"# \\dontrun{ test_dir <- withr::local_tempdir() dir.create(test_dir) file.copy(    system.file(\"test-data\", \"DEM.tif\", package = \"traudem\"),    file.path(test_dir, \"DEM.tif\")  ) #> [1] TRUE filled_pit <- taudem_pitremove(file.path(test_dir, \"DEM.tif\")) #> PitRemove version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d154ecc3c/DEM.tif has projected coordinate system. #> Nodata value input to create partition from file: nan #> Nodata value recast to float used in partition raster: nan #> Processes: 1 #> Header read time: 0.002877 #> Data read time: 0.000897 #> Compute time: 0.006939 #> Write time: 0.002220 #> Total time: 0.012934 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. outputs <- taudem_d8flowdir(filled_pit) #> D8FlowDir version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d154ecc3c/DEMfel.tif has projected coordinate system. #> Nodata value input to create partition from file: -300000000549775575777803994281145270272.000000 #> Nodata value recast to float used in partition raster: -300000000549775575777803994281145270272.000000 #> Processors: 1 #> Header read time: 0.002884 #> Data read time: 0.000912 #> Compute Slope time: 0.006287 #> Write Slope time: 0.002127 #> Resolve Flat time: 0.000037 #> Write Flat time: 0.001153 #> Total time: 0.013400 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. #> All slopes evaluated. 0 flats to resolve. outputs #> $output_d8flowdir_grid #> [1] \"/tmp/Rtmpy86iNE/file4b8d154ecc3c/DEMfeld8flowdir.tif\" #>  #> $output_d8slopes_grid #> [1] \"/tmp/Rtmpy86iNE/file4b8d154ecc3c/DEMfeld8slopes.tif\" #>  contributing_area_grid <- taudem_aread8(outputs$output_d8flowdir_grid) #> AreaD8 version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d154ecc3c/DEMfeld8flowdir.tif has projected coordinate system. #> Nodata value input to create partition from file: -32768.000000 #> Nodata value recast to int16_t used in partition raster: -32768 #> Number of Processes: 1 #> Read time: 0.003250 #> Compute time: 0.006722 #> Write time: 0.001524 #> Total time: 0.011497 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. contributing_area_grid #> [1] \"/tmp/Rtmpy86iNE/file4b8d154ecc3c/DEMfeld8flowdirctb.tif\" thresholded <- taudem_threshold(contributing_area_grid) #> Threshold version 5.3.9 #> Input file /tmp/Rtmpy86iNE/file4b8d154ecc3c/DEMfeld8flowdirctb.tif has projected coordinate system. #> Nodata value input to create partition from file: -1.000000 #> Nodata value recast to float used in partition raster: -1.000000 #> Compute time: 0.000296 #> This run may take on the order of 1 minutes to complete. #> This estimate is very approximate.  #> Run time is highly uncertain as it depends on the complexity of the input data  #> and speed and memory of the computer. This estimate is based on our testing on  #> a dual quad core Dell Xeon E5405 2.0GHz PC with 16GB RAM. thresholded #> [1] \"/tmp/Rtmpy86iNE/file4b8d154ecc3c/DEMfeld8flowdirctbthresholded.tif\" # }"},{"path":"https://lucarraro.github.io/traudem/reference/traudem-package.html","id":null,"dir":"Reference","previous_headings":"","what":"traudem: Use 'TauDEM' — traudem-package","title":"traudem: Use 'TauDEM' — traudem-package","text":"Simple trustworthy utility functions use 'TauDEM' command-line interface.","code":""},{"path":[]},{"path":"https://lucarraro.github.io/traudem/reference/traudem-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"traudem: Use 'TauDEM' — traudem-package","text":"Maintainer: Luca Carraro Luca.Carraro@eawag.ch Authors: Maëlle Salmon maelle@cynkra.com (ORCID) Wael Sadek","code":""}]
